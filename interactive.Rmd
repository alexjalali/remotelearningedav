# Interactive component
<h2>This is the sample4</h2>

<meta charset="utf-8">
<style>

.background {
  fill: #eee;
  opacity: 0;
  pointer-events: all;
}

.map-layer {
  fill: #fff;
  stroke: #aaa;
}

.effect-layer{
  pointer-events:none;
}

text{
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 300;
}

text.big-text{
  font-size: 30px;
  font-weight: 400;
}

text.medium-text{
  font-size: 15px;
  font-weight: 400;
}
text.small-text{
  font-size: 12px;
  font-weight: 1000;
}
.effect-layer text{
  font-size: 12px;
}

</style>
<body>


<script src="https://d3js.org/d3.v7.js"></script>
<div id = "graph1"></div>

<h2> This is the second graph </h2>

<div id = "graph2"></div>
<script>
var width = 960,height = 500,centered;

// Define color scale
const color = d3.scaleLinear()
  .domain([1, 20])
  .clamp(true)
  .range(['#fff', '#409A99']);

const projection = d3.geoMercator()
  .scale(45000)
  .center([-73.935242, 40.730610])
  .translate([width / 2, height / 2]);

const path = d3.geoPath()
  .projection(projection);

const svg = d3.select('div#graph1')
  .append('svg')
  .attr('width', width)
  .attr('height', height);

svg.append('rect')
  .attr('class', 'background')
  .attr('width', width)
  .attr('height', height);

svg.append("circle")
  .attr("cx",200)
  .attr("cy",130)
  .attr("r", 9)
  .style("fill", "orange")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",160)
  .attr("r", 9)
  .style("fill", "lightblue")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",190)
  .attr("r", 9)
  .style("fill", "green")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",220)
  .attr("r", 9)
  .style("fill", "pink")

svg.append("circle")
  .attr("cx",200)
  .attr("cy",250)
  .attr("r", 9)
  .style("fill", "purple")

svg.append("text")
  .attr("x", 220)
  .attr("y", 130)
  .text("Manhattan")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 160)
  .text("Brooklyn")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 190)
  .text("Bronx")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 220)
  .text("Queens")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")

svg.append("text")
  .attr("x", 220)
  .attr("y", 250)
  .text("Staten Island")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")

svg.append("text")
  .attr("x", 280)
  .attr("y", 25)
  .text("Find Your District: ")
  .style("font-size", "35px")
  .attr("alignment-baseline","middle")
  
const g = svg.append('g');

const effectLayer = g.append('g')
  .classed('effect-layer', true);

const mapLayer = g.append('g')
  .classed('map-layer', true);

const bigText = g.append('text')
  .classed('big-text', true)
  .attr('x', 550)
  .attr('y', 33);

d3.json('https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/School%20Districts.geojson').then(function(mapData) {
  var features = mapData.features;

  color.domain([0, 1]);

  mapLayer.selectAll('path')
      .data(features)
    .enter().append('path')
      .attr('d', path)
      .attr('vector-effect', 'non-scaling-stroke')
      .style('fill', fill)
      .on('mouseover', mouseover)
      .on('mouseout', mouseout);
});

function name(d){
  return d.properties.school_dist;
}


function fill(d){
  if(parseInt(name(d)) <= 6) return "orange";
  if(String(name(d)) == "31") return "purple";
  if(parseInt(name(d)) <= 12 && parseInt(name(d)) >= 7) return "green";
  if(parseInt(name(d)) <= 30 && parseInt(name(d)) >= 24) return "pink";
  return "lightblue";
}

function mouseover(event, d){
  d3.select(this).style('fill', 'yellow');
  bigText
    .style('font-family', 'Helvetica Neue')
    .text("District " + String(name(d)));
}

function mouseout(d){
  mapLayer.selectAll('path')
    .style('fill', function(d){return centered && d===centered ? '#D5708B' : fill(d);});

  effectLayer.selectAll('text').transition()
    .style('opacity', 0)
    .remove();
  bigText
    .text("");
}


const svg2 = d3.select('div#graph2')
  .append('svg')
  .attr('width', width)
  .attr('height', height);

svg2.append('rect')
  .attr('class', 'background')
  .attr('width', width)
  .attr('height', height);

const g2 = svg2.append('g');

const effectLayer2 = g2.append('g')
  .classed('effect-layer', true);

const mapLayer2 = g2.append('g')
  .classed('map-layer', true);

const bigText2 = g2.append('text')
  .classed('big-text', true)
  .attr('x', 10)
  .attr('y', 25);

const mediumText1 = g2.append('text')
  .classed('small-text', true);

const mediumText2 = g2.append('text')
  .classed('small-text', true);

const mediumText3 = g2.append('text')
  .classed('small-text', true);

const mediumText4 = g2.append('text')
  .classed('small-text', true);

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 125).text('75%');

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 144).text('70%');

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 163).text('65%');

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 182).text('60%');

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 201).text('55%');

g2.append('text')
  .classed('small-text', true)
  .attr('x', 237).attr('y', 220).text('50%');

g2.append("rect").attr('x', 200).attr('y', 119.2).attr('width', 30)
  .attr('height', 100).attr('fill', 'white').style('opacity',1).attr('stroke', 'black');
  
g2.append("rect").attr('x', 200).attr('y', 120).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',1);
  
g2.append("rect").attr('x', 200).attr('y', 125).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.95);
  
g2.append("rect").attr('x', 200).attr('y', 130).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.9);
  
g2.append("rect").attr('x', 200).attr('y', 135).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.85);
  
g2.append("rect").attr('x', 200).attr('y', 140).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.80);
  
g2.append("rect").attr('x', 200).attr('y', 145).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.75);
  
g2.append("rect").attr('x', 200).attr('y', 150).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.70);
  
g2.append("rect").attr('x', 200).attr('y', 155).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.65);
  
g2.append("rect").attr('x', 200).attr('y', 160).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.6);
  
g2.append("rect").attr('x', 200).attr('y', 165).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.55);
  
g2.append("rect").attr('x', 200).attr('y', 170).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.5);
  
g2.append("rect").attr('x', 200).attr('y', 175).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.45);
  
g2.append("rect").attr('x', 200).attr('y', 180).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.4);
  
g2.append("rect").attr('x', 200).attr('y', 185).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.35);
  
g2.append("rect").attr('x', 200).attr('y', 190).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.30);
  
g2.append("rect").attr('x', 200).attr('y', 195).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.25);
  
g2.append("rect").attr('x', 200).attr('y', 200).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.20);
  
g2.append("rect").attr('x', 200).attr('y', 205).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.15);
  
g2.append("rect").attr('x', 200).attr('y', 210).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.10);
  
g2.append("rect").attr('x', 200).attr('y', 215).attr('width', 30)
  .attr('height', 5).attr('fill', 'red').style('opacity',0.05);


var xAxis = d3.axisBottom()
.scale(d3.scaleBand().domain(['2018', '2022']).range([0,200]));

var yAxis = d3.axisLeft()
.scale(d3.scaleLinear().domain([650, 550]).range([0,150]));

const xAxisshow = g2.append('g')
    .attr("transform",`translate(${600},${160})`);

const yAxisshow = g2.append('g')
    .attr("transform",`translate(${600},${10})`);

const bigText3 = g2.append('text')
  .classed('big-text', true)
  .attr('x', 550)
  .attr('y', 33);
const legendname = g2.append('text')
  .classed('small-text', true)
  .attr('x', 190)
  .attr('y', 105)
	.text('% remote');

const bar1 = g2.append("rect");
const bar2 = g2.append("rect");
const bar3 = g2.append("rect");
const bar4 = g2.append("rect");

const xlabel = g2.append('text');
const ylabel = g2.append('text');

d3.csv("https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/datasets/DataClean.csv").then(function(data) {
  function opacity(d){
  const ArrayPercent = [];
	for (var i=1; i <= 32; i++){
    ArrayPercent.push(parseFloat(data[i*15-1].PercentRemote));
  }
  const min = d3.min(ArrayPercent)-4;
  const max = d3.max(ArrayPercent);
  return (ArrayPercent[parseInt(name(d))-1]-min)/(max-min);
  }
  
  function math19(d){
    const ArrayMath2019 = [];
    for (var i=1; i <= 32; i++){
    	ArrayMath2019.push(parseFloat(data[i*15-1].MathScores2019));
  	}
    return ArrayMath2019[parseInt(name(d))-1].toFixed(1);
  }
  
  function ela19(d){
    const ArrayELA2019 = [];
    for (var i=1; i <= 32; i++){
    	ArrayELA2019.push(parseFloat(data[i*15-1].ELAScores2019));
  	}
    return ArrayELA2019[parseInt(name(d))-1].toFixed(1);
  }
  
  function math22(d){
    const ArrayMath2022 = [];
    for (var i=1; i <= 32; i++){
    	ArrayMath2022.push(parseFloat(data[i*15-1].MathScores2022));
  	}
    return ArrayMath2022[parseInt(name(d))-1].toFixed(1);
  }
  
  function ela22(d){
    const ArrayELA2022 = [];
    for (var i=1; i <= 32; i++){
    	ArrayELA2022.push(parseFloat(data[i*15-1].ELAScores2022));
  	}
    return ArrayELA2022[parseInt(name(d))-1].toFixed(1);
  }
  
  function mouseover2(event, d){
  d3.select(this).style('fill', 'yellow').style('opacity', 1);
  bigText2
    .style('font-family', 'Helvetica Neue')
    .text("District " + String(name(d)));
  mediumText1
    .style('font-family', 'Helvetica Neue')
    .attr('x', 618)
  	.attr('y', 155-(math19(d)-550)*(150/100))
    .text(String(math19(d)));
  mediumText2
    .style('font-family', 'Helvetica Neue')
    .attr('x', 718)
  	.attr('y', 155-(math22(d)-550)*(150/100))
    .text(String(math22(d)));
  mediumText3
    .style('font-family', 'Helvetica Neue')
    .attr('x', 652)
  	.attr('y', 155-(ela19(d)-550)*(150/100))
    .text(String(ela19(d)));
  mediumText4
    .style('font-family', 'Helvetica Neue')
    .attr('x', 752)
  	.attr('y', 155-(ela22(d)-550)*(150/100))
    .text(String(ela22(d)));
  xAxisshow.call(xAxis);
	yAxisshow.call(yAxis);

  bar1.attr('x', 620)
    .attr('y', 160-(math19(d)-550)*(150/100)).attr('width', 30)
  	.attr('height', (math19(d)-550)*(150/100)).attr('fill', '#0492C2').attr('opacity', 0.8);
    
  bar2.attr('x', 650)
    .attr('y', 160-(ela19(d)-550)*(150/100)).attr('width', 30)
  	.attr('height', (ela19(d)-550)*(150/100)).attr('fill', '#597D35').attr('opacity', 0.8);
    
  bar3.attr('x', 720)
    .attr('y', 160-(math22(d)-550)*(150/100)).attr('width', 30)
  	.attr('height', (math22(d)-550)*(150/100)).attr('fill', '#0492C2').attr('opacity', 0.8);
  
  bar4.attr('x', 750)
    .attr('y', 160-(ela22(d)-550)*(150/100)).attr('width', 30)
  	.attr('height', (ela22(d)-550)*(150/100)).attr('fill', '#597D35').attr('opacity', 0.8);
  xlabel.classed('small-text', true).attr('x', 540).attr('y',10).text('Score').attr('font-weight', 800);
  ylabel.classed('small-text', true).attr('x', 810).attr('y',165).text('Year').attr('font-weight', 800);
	}
  
  function mouseout2(d){
  mapLayer2.selectAll('path')
    .style('fill', 'red').style('opacity', opacity);
}

d3.json('https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/School%20Districts.geojson').then(function(mapData) {
  var features = mapData.features;

  mapLayer2.selectAll('path')
      .data(features).enter().append('path').attr('d', path)
      .attr('vector-effect', 'non-scaling-stroke').style('fill', "red")
      .style('opacity', opacity)
      .on('mouseover', mouseover2)
      .on('mouseout', mouseout2);
});
});
</script>
