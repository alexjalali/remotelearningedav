# Interactive component
<h2>This is the sample4</h2>

<meta charset="utf-8">
<style>

.background {
  fill: #eee;
  opacity: 0;
  pointer-events: all;
}

.map-layer {
  fill: #fff;
  stroke: #aaa;
}

.effect-layer{
  pointer-events:none;
}

text{
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 300;
}

text.big-text{
  font-size: 30px;
  font-weight: 400;
}

.effect-layer text{
  font-size: 12px;
}

</style>
<body>


<script src="https://d3js.org/d3.v7.js"></script>
<div id = "graph1"></div>

<h2> This is the second graph </h2>

<div id = "graph2"></div>
<script>
var width = 960,height = 500,centered;

// Define color scale
const color = d3.scaleLinear()
  .domain([1, 20])
  .clamp(true)
  .range(['#fff', '#409A99']);

const projection = d3.geoMercator()
  .scale(45000)
  .center([-73.935242, 40.730610])
  .translate([width / 2, height / 2]);

const path = d3.geoPath()
  .projection(projection);

const svg = d3.select('div#graph1')
  .append('svg')
  .attr('width', width)
  .attr('height', height);

svg.append('rect')
  .attr('class', 'background')
  .attr('width', width)
  .attr('height', height);

svg.append("circle")
  .attr("cx",200)
  .attr("cy",130)
  .attr("r", 9)
  .style("fill", "orange")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",160)
  .attr("r", 9)
  .style("fill", "lightblue")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",190)
  .attr("r", 9)
  .style("fill", "green")
  
svg.append("circle")
  .attr("cx",200)
  .attr("cy",220)
  .attr("r", 9)
  .style("fill", "pink")

svg.append("circle")
  .attr("cx",200)
  .attr("cy",250)
  .attr("r", 9)
  .style("fill", "purple")

svg.append("text")
  .attr("x", 220)
  .attr("y", 130)
  .text("Manhattan")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 160)
  .text("Brooklyn")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 190)
  .text("Bronx")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")
  
svg.append("text")
  .attr("x", 220)
  .attr("y", 220)
  .text("Queens")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")

svg.append("text")
  .attr("x", 220)
  .attr("y", 250)
  .text("Staten Island")
  .style("font-size", "20px")
  .attr("alignment-baseline","middle")

svg.append("text")
  .attr("x", 280)
  .attr("y", 25)
  .text("Find Your District: ")
  .style("font-size", "35px")
  .attr("alignment-baseline","middle")
  
const g = svg.append('g');

const effectLayer = g.append('g')
  .classed('effect-layer', true);

const mapLayer = g.append('g')
  .classed('map-layer', true);

const bigText = g.append('text')
  .classed('big-text', true)
  .attr('x', 550)
  .attr('y', 33);

d3.json('https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/School%20Districts.geojson').then(function(mapData) {
  var features = mapData.features;

  color.domain([0, 1]);

  mapLayer.selectAll('path')
      .data(features)
    .enter().append('path')
      .attr('d', path)
      .attr('vector-effect', 'non-scaling-stroke')
      .style('fill', fill)
      .on('mouseover', mouseover)
      .on('mouseout', mouseout);
});

function name(d){
  return d.properties.school_dist;
}


function fill(d){
  if(parseInt(name(d)) <= 6) return "orange";
  if(String(name(d)) == "31") return "purple";
  if(parseInt(name(d)) <= 12 && parseInt(name(d)) >= 7) return "green";
  if(parseInt(name(d)) <= 30 && parseInt(name(d)) >= 24) return "pink";
  return "lightblue";
}

function mouseover(event, d){
  d3.select(this).style('fill', 'yellow');
  bigText
    .style('font-family', 'Helvetica Neue')
    .text("District " + String(name(d)));
}

function mouseout(d){
  mapLayer.selectAll('path')
    .style('fill', function(d){return centered && d===centered ? '#D5708B' : fill(d);});

  effectLayer.selectAll('text').transition()
    .style('opacity', 0)
    .remove();
  bigText
    .text("");
}


const svg2 = d3.select('div#graph2')
  .append('svg')
  .attr('width', width)
  .attr('height', height);

svg2.append('rect')
  .attr('class', 'background')
  .attr('width', width)
  .attr('height', height);

svg2.append("circle")
  .attr("cx",200)
  .attr("cy",130)
  .attr("r", 9)
  .style("fill", "orange")

const g2 = svg2.append('g');

const effectLayer2 = g2.append('g')
  .classed('effect-layer', true);

const mapLayer2 = g2.append('g')
  .classed('map-layer', true);

const bigText2 = g2.append('text')
  .classed('big-text', true)
  .attr('x', 20)
  .attr('y', 45);

d3.csv("https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/datasets/DataClean.csv", function(data) {
  function opacity(d){
  const ArrayPercent = [71.23, 67.48, 58.14, 68.22, 72.82, 69.9,
                        66.38, 71.57, 69.4, 70.4, 67.76, 65.77,
                				72.48, 64.69, 54.55, 65.86, 67.38, 69.27,
                				71.63, 71.32, 72.13, 66.83, 66.24, 55.73,
                				72.32, 75.35, 71.56, 74.21, 72.13, 59.51,
                				58.78, 61.23];
  const min = d3.min(ArrayPercent);
  const max = d3.max(ArrayPercent);
  return (ArrayPercent[parseInt(name(d))-1]-min)/(max-min);
  }
  
d3.json('https://raw.githubusercontent.com/alexjalali/remotelearningedav/main/School%20Districts.geojson').then(function(mapData) {
  var features = mapData.features;
  color.domain([0, 1]);

  mapLayer2.selectAll('path')
      .data(features).enter().append('path').attr('d', path)
      .attr('vector-effect', 'non-scaling-stroke').style('fill', "red")
      .style('opacity', opacity)
      .on('mouseover', mouseover2)
      .on('mouseout', mouseout2);
});
});

function mouseover2(event, d){
  d3.select(this).style('fill', 'yellow').style('opacity', 1);
  bigText
    .style('font-family', 'Helvetica Neue')
    .text("District " + String(name(d)));
}
  
function mouseout2(d){
  mapLayer2.selectAll('path')
    .style('fill', function(d){return centered && d===centered ? '#D5708B' : "red";}).style('opacity', opacity);

  effectLayer.selectAll('text').transition()
    .style('opacity', 0)
    .remove();
  bigText
    .text("");
}
</script>
